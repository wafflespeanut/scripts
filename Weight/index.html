<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link rel="stylesheet" type="text/css" href="../stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="../stylesheets/pygment_trac.css" media="screen" />
    <title>ADP Weight Iterator | Iterate to find the gross & empty weights for your aircraft...</title>
	<style>
	textarea { width: 100px; height: 17px; font-size: 17px; border:1px solid green; padding: 4px 4px; background: black; color:white; font-family:Lucida console; resize: none; overflow: hidden; white-space: nowrap; outline:none }
	#atm { border: 2px dashed #fff; width:400px; height:175px; padding: 15px; text-align: center; }
	.demo select {	border:1px solid green; font-size: 15px; -webkit-appearance:none; -moz-appearance:none; width: 100px; text-indent: 0.02px; color: #FFF; padding:5px; box-shadow: inset 0 0 5px rgba(000,000,000,0.5); background-color: #000; outline:none }
	</style>
  </head>

  <body>
    <header>
      <div class="container">
        <h1>ADP - Weight Iterator</h1>
        <h2>Iterate to find the gross & empty weights for your aircraft...</h2>
        <section id="downloads">
          <a href="../index.html" class="btn btn-blog"><span class="icon"></span>Home</a>
		  <a href="https://github.com/Wafflespeanut" class="btn btn-github"><span class="icon"></span>My GitHub profile</a>
          <a href="https://wafflescrazypeanut.wordpress.com" class="btn btn-blog"><span class="icon"></span>Arrow of Time (My blog)</a>
        </section>
      </div>
    </header>
    <div class="container">
      <section id="main_content">
		<script src="../javascripts/statm.js" type="text/javascript"></script>

		<ul><p><li>This program is used for iterating the "weights" of a selected aircraft so that the sum of payload, crew, engine, fuel & empty weights match the net weight of the aircraft. Since both empty & net weights are unknowns, iteration is the only approach to the solution.</li></p>

		<p><li>The script just displays the iteration results. If you wanna print them out, use the <a href="https://github.com/Wafflespeanut/Python/blob/master/Scrap/Course/ADP - Weight Estimation.py">Python script</a> instead. Begin by choosing your engine type, fill up the boxes with your <s>assumption</s> data and <strong>ITERATE!</strong> (make sure you check the units). Units are based on the data <a href="http://www.jet-engine.net">available here</a>.</li></p></ul><br>

		<form class="demo" action="form_action.asp">
		<center><strong><p style="font-size: 20px; font-family: 'Courier New'""">Type of Engine:
			<select id='engine' style="font-size: 17px; width: 250px; font-family: 'Courier New'">
				<option value="0">Choose your engine...</option>
				<option value="1">Turbofan / Turbojet</option>
				<option value="2">Turboprop / Turboshaft</option>
			</select></p></strong>
		</center></form><a id="data"></a><br>

		<div id='dhide' style="display:none">
		<hr><br><br>

		<form class="demo" action="form_action.asp"><br>
		<table border="0" cellspacing="0">
		<h2>Fill up the boxes!</h2>

		<td><table border="0" cellspacing="0">
		<tr><td><strong>Net weight, W<sub>0</sub></strong> = <textarea id="W0">393085</textarea> kg
		<tr><td><strong>Empty Weight, W<sub>E</sub></strong> = <textarea id="WE">177945</textarea> kg
		<tr><td><strong><output id='load'>Thrust Loading</output></strong> = <textarea id="TL">0.27665</textarea> <output id='pl'>(no unit)</output>
		<tr><td><strong>Payload Weight, W<sub>P</sub></strong> = <textarea id="WP">52960</textarea> kg
		<tr><td><strong>Crew Weight, W<sub>C</sub></strong> = <textarea id="WC">2000</textarea> kg
		<tr><td><strong>Range, R</strong> = <textarea maxlength="5" id="R">14000</textarea> km
		<tr><td><strong>Number of Engines: </strong>
		<select id="N" style="width: 40px">
			<option value="4">4</option>
			<option value="2">2</option>
			<option value="3">3</option>
			<option value="5">5</option>
			<option value="6">6</option>
		</select><br><br><br><p id='proc' align=center style="font-size:23px"><a href='#iters'>[PROCEED]</a></p></table>

		<td><table border="0" cellspacing="0">
		<tr><td><strong>Fuel Weight ratio, W<sub>F</sub>/W<sub>0</sub></strong> = 
		<select id='flight' style="width: 130px">
			<option value="0.3">0.3 (Long haul)</option>
			<option value="0.4">0.4 (Long haul)</option>
			<option value="0.15">0.15 (Short haul)</option>
		</select>
		<tr><td><strong>Cruise Altitude, H<sub>cr</sub></strong> = <textarea onclick="this.select()" id="alt">10752</textarea> m
		<tr><td><strong>Cruise Velocity, v<sub>cr</sub></strong> = <textarea onclick="this.select()" id="VCR">910.2748</textarea> km/hr
		<tr><td><strong>Cruise Mach Number, M<sub>cr</sub></strong> = <textarea onclick="this.select()" id="MCR">0.85</textarea><br><br>

		<div id="atm"><h3>Standard Atmosphere data</h3><table border="0" cellspacing="0">
		<tr><td><strong>Pressure, P<sub>0</sub></strong> = <textarea readonly onclick="this.select()" id="P0">23524.9047</textarea> Pa
		<tr><td><strong>Temperature, T<sub>0</sub></strong> = <textarea readonly onclick="this.select()" id="T0">218.262</textarea> K
		<tr><td><strong>Density, œÅ<sub>0</sub></strong> = <textarea readonly onclick="this.select()" id="d0">0.3756</textarea> kg/m<sup>3</sup>
		</div></table></table></table></div>

		<div id='ihide' style="display:none"><a id="iters"></a>
		<hr><br>
		<ul><p><li>Most of the boxes here are <strong>dynamic!</strong> i.e., they change as and whenever you update the related boxes. So, I suggest you go by this order, to prevent errors during calculation...
		<ol><p>1) <span><button class="button-warning pure-button" style="font-size: 15px; font-family: 'Courier New'" type="button">Iterate</button></span> to find the thrust.
		<p>2) Never press the button until you've entered your engine's thrust, followed by SFC and finally its weight (which dynamically updates the respective parameters).
		<p>3) <span><button class="button-warning pure-button" style="font-size: 15px; font-family: 'Courier New'" type="button">Iterate</button></span> to find the resulting net weight.
		</ol></ul><br>

		<h2>Iteration!</h2>
		<table border="0" cellspacing="0">

		<td><table border="0" cellspacing="0">
		<tr><td><strong>Iteration: </strong><textarea style="width: 50px" id='iter'>0</textarea>
		<tr><td><strong>Net weight, W<sub>0</sub></strong> = <textarea onclick="this.select()" id="W01">0</textarea> kg
		<tr><td><strong><output id='req'>Thrust  required (per engine), T</output></strong> = <textarea onclick="this.select()" id="T1">0</textarea> <output id='thu'>lbf</output>
		<tr><td><strong><output id='cr'>Cruise Thrust (per engine), T</output><sub>cr</sub></strong> = <textarea onclick="this.select()" id="TCR1">0</textarea> <output id='cru'>N</output>
		<tr><td><strong>Fuel Weight ratio, W<sub>F</sub>/W<sub>0</sub></strong> = <textarea onclick="this.select()" id="RF1">0</textarea>
		<tr><td><strong>Empty Weight ratio, W<sub>E</sub>/W<sub>0</sub></strong> = <textarea onclick="this.select()" id="RE1">0</textarea>
		</table>

		<td><table border="0" cellspacing="0">
		<tr><td><strong><output id='et'>Engine Thrust, T</output><sub>E</sub></strong> = <textarea onclick="this.select()" id="TE1">0</textarea> <output id='etu'>lbf</output>
		<tr><td><strong>SFC = <textarea onclick="this.select()" id="SFC">0</textarea> <output id='sfcu'>lb/lbf-hr</output>
		<tr><td><strong>Engine Weight, W<sub>PP</sub></strong> = <textarea onclick="this.select()" id="WPP1">0</textarea> lb<br><br>
		<span><button class="button-warning pure-button" style="font-size: 23px; font-family: 'Courier New'" type="button" onclick="fan()">Iterate</button> <button class="button-error pure-button" style="font-size: 23px; font-family: 'Courier New'" type="button" onclick="restart()">Reset</button></span>
		</table>
		<p id='change' align=center style="font-size:23px"><a href='#data'>[CHANGE VALUES]</a></p>

		</table></form></div>
		<script type="text/javascript">

		eng=document.getElementById('engine'); con=document.getElementById('proc'); it=document.getElementById('change'); eng.value=0

		con.onclick = function() {
			document.getElementById('dhide').style.display='none';
			document.getElementById('ihide').style.display='block';
			restart() }

		it.onclick = function() { document.getElementById('ihide').style.display='none'; document.getElementById('dhide').style.display='block'; restart() }

		eng.onclick = function() {
			if(eng.value==0) { document.getElementById('dhide').style.display='none' }
			else { document.getElementById('dhide').style.display='block' }
			if(eng.value==1) { location.href='#data'
				document.getElementById('load').value='Thrust Loading'
				document.getElementById('flight').value=0.4; document.getElementById('pl').value=' (no unit)'
				document.getElementById('req').value='Thrust required (per engine), T'
				document.getElementById('thu').value='lbf'; document.getElementById('cru').value='N'
				document.getElementById('cr').value='Cruise Thrust (per engine), T'
				document.getElementById('et').value='Engine Thrust, T'; document.getElementById('etu').value='lbf'
				document.getElementById('sfcu').value='lb/lbf-hr'; document.getElementById('N').value=4 }
			else if(eng.value==2) { location.href='#data'
				document.getElementById('load').value='Power Loading'
				document.getElementById('flight').value=0.15; document.getElementById('pl').value=' SHP/kg'
				document.getElementById('req').value='Power required (per engine), P'
				document.getElementById('thu').value='SHP'; document.getElementById('cru').value='SHP'
				document.getElementById('cr').value='Cruise Power (per engine), P'
				document.getElementById('et').value='Engine Power, P'; document.getElementById('etu').value='SHP'
				document.getElementById('sfcu').value='lb/SHP-hr'; document.getElementById('N').value=2 } }

		vcr=document.getElementById("VCR"); mcr=document.getElementById("MCR")
		h=document.getElementById("alt"); wpp=0; W=document.getElementById('W0')
		document.getElementById('W01').value=W.value; WE=document.getElementById('WE')
		document.getElementById('RE1').value=document.getElementById('WE').value/W.value
		re0=document.getElementById('RE1').value

		mcr.onkeyup = function() {
			vcr.value = mcr.value*Math.sqrt(atmos(parseInt(h.value))[1]*1.4*287)*18/5 }
		vcr.onkeyup = function() {
			mcr.value = vcr.value/(Math.sqrt(atmos(parseInt(h.value))[1]*1.4*287)*18/5) }

		h.onkeyup = function() {
			document.getElementById('P0').value=atmos(parseInt(h.value))[0];
			document.getElementById('T0').value=atmos(parseInt(h.value))[1];
			document.getElementById('d0').value=atmos(parseInt(h.value))[2];
			if(vcr.value) { document.getElementById('MCR').value = vcr.value/(Math.sqrt(atmos(parseInt(h.value))[1]*1.4*287)*18/5) } }

		W.onkeyup = function() {
			document.getElementById('W01').value=W.value
			document.getElementById('RE1').value=WE.value/W.value }
		WE.onkeyup = function() {
			document.getElementById('RE1').value=WE.value/W.value }

		function restart() {
			document.getElementById('W01').value=document.getElementById('W0').value
			document.getElementById('RE1').value=document.getElementById('WE').value/document.getElementById('W0').value
			document.getElementById('iter').value=0; document.getElementById('SFC').value=0
			document.getElementById('WPP1').value=0; document.getElementById('TE1').value=0
			document.getElementById('T1').value=0; document.getElementById('TCR1').value=0
			document.getElementById('RF1').value=0; wpp=0 }

		function fan() {
			i=document.getElementById('iter'); n=parseFloat(document.getElementById('N').value)
			tl=parseFloat(document.getElementById('TL').value); ca=parseFloat(h.value); d0=1.225
			cv=parseFloat(document.getElementById('VCR').value); wp=parseFloat(document.getElementById('WP').value)
			wc=parseFloat(document.getElementById('WC').value); r=parseFloat(document.getElementById('R').value)
			w0=parseFloat(document.getElementById('W01').value); TE=document.getElementById('TE1')
			wf=parseFloat(document.getElementById('RF1').value)*parseFloat(document.getElementById('W01').value)
			WPP=document.getElementById('WPP1'); sfc=document.getElementById('SFC')
			re=parseFloat(document.getElementById('RE1').value)
			if(i.value==0) {
				rf=parseFloat(document.getElementById('flight').value) }
			else { rf=0 }
			re=document.getElementById('RE1').value; w0=(wc+wp+wpp+wf)/(1-re-rf)
			document.getElementById('W01').value=w0
			if(eng.value==1) { t=w0*tl*9.81*1.2; document.getElementById('T1').value=t/(4.448*n) }
			else { t=w0*tl*1.2; document.getElementById('T1').value=t/n }
			if(i.value>0) {
				if(eng.value==1) { tc=TE.value*4.448*n*Math.pow((atmos(ca)[2]/d0),1.2) }
				else { tc=TE.value*n*Math.pow((atmos(ca)[2]/d0),1.2) }
				document.getElementById('TCR1').value=tc/n
				if(eng.value==1) { wf=(sfc.value*tc*r*1.2)/(cv*9.81) }
				else { wf=(sfc.value*tc*r*1.2*0.4535924)/(cv) }
				document.getElementById('RF1').value=wf/w0
				wpp=WPP.value*0.4535924*n; document.getElementById('RE1').value=re0-wpp/w0 }
			TE.onkeyup = function() {
				if(eng.value==1) { tc=TE.value*4.448*n*Math.pow((atmos(ca)[2]/d0),1.2) }
				else { tc=TE.value*n*Math.pow((atmos(ca)[2]/d0),1.2) }
				document.getElementById('TCR1').value=tc/n }
			sfc.onkeyup = function() {
				if(eng.value==1) { wf=(sfc.value*tc*r*1.2)/(cv*9.81) }
				else { wf=(sfc.value*tc*r*1.2*0.4535924)/(cv) }
				document.getElementById('RF1').value=wf/w0 }
			WPP.onkeyup = function() { wpp=WPP.value*0.4535924*n; document.getElementById('RE1').value=re0-wpp/w0 }
			i.value=parseFloat(i.value)+1 }

		</script>
      </section>
    </div>
  </body>
</html>